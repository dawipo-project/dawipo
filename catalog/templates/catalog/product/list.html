{% extends 'base.html' %}
{% load static %}
{% block title %}DAWIPO - {% if category %}{{ category.name }}{% else %}Cat√°logo{% endif %}{% endblock %}
{% block content %}
<div class="row">
	<div class="col-12">
		<div class="page-title-box">
			<div class="page-title-right">
				<ol class="breadcrumb m-0">
					<li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Home</a></li>
					<li class="breadcrumb-item {% if not category %}active{% endif %}">Catalog</li>
					{% if category %}
					<li class="breadcrumb-item active">{{ category.name }}</li>
					{% endif %}
				</ol>
			</div>
			<h4 class="page-title text-comfortaa">
				{% if category %}
				Products - {{ category.name }}
				{% else %}
				Products - All categories
				{% endif %}
			</h4>
		</div>
	</div>
</div>
<div class="row">
	<ul class="nav ml-2 mb-2">
		<li class="nav-item mr-2 mt-sm-2 mt-lg-0">
			<a href="{% url 'catalog:add_product' %}" class="btn btn-primary btn-sm">
				<i class="uil-plus-circle"></i>
				Add new product
			</a>
		</li>
		<li class="nav-item mr-2 mt-sm-2 mt-lg-0">
			<a href="{% url 'catalog:add_category' %}" class="btn btn-warning btn-sm">
				<i class="uil-plus-circle"></i>
				Add new category
			</a>
		</li>
		<li class="nav-item mt-sm-2 mt-lg-0">
			<a href="{% if category %}{% url 'catalog:category_product_list_table' category.slug %}{% else %}{% url 'catalog:product_list_table' %}{% endif %}" class="btn btn-secondary btn-sm">
				<i class="uil-list-ul"></i>
				View as table
			</a>
		</li>
	</ul>
</div>
<div class="row">
	{% for product in products %}
	<div class="col-sm-12 col-md-6 col-lg-4">
		<div class="card">
			{% if product.image %}
			<img src="{{ product.image.url }}" alt="{{ product.slug }}" class="card-img-top">
			{% else %}
			<img src="{% static 'images/no_image.png' %}" alt="{{ product.slug }}" class="card-img-top">
			{% endif %}
			<div class="card-body">
				<h5 class="card-title"><a href="{{ product.get_absolute_url }}">{{ product.name }}</a></h5>
				<hr>
				<p class="card-text">
					{{ product.description|truncatewords:20 }}
				</p>
				<h5><span class="text-success">Retail price:</span> US${{ product.retail_price }}</h5>
				<h5><span class="text-success">Whole sale price:</span> US${{ product.whole_sale_price }}</h5>
			</div>
		</div>
	</div>
	{% endfor %}
</div>
{% endblock %}